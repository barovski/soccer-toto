<template name="games">
  <div class="page-content">

    <div class="mdl-grid">
      <div class="mdl-cell mdl-cell--12-col mdl-cell--8-col-tablet mdl-cell--4-col-phone">
        <h4>Offene Spiele</h4>
        {{> openGames}}
      </div>

      <div class="mdl-cell mdl-cell--12-col mdl-cell--8-col-tablet mdl-cell--4-col-phone">
        <h4>Abgeschlossene Spiele</h4>
        {{> finishedGames}}
      </div>
    </div>

  </div>
</template>


<template name="openGames">
  <table id="" class="standardTable gamesTable responsive-table bordered highlight">
    <thead>
      <tr>
        <th>Datum</th>
        <th>Uhrzeit</th>
        <th>Gruppe / Runde</th>
        <th>Mannschaft 1</th>
        <th>Mannschaft 2</th>
        <th>Auf Ergebnis wetten</th>
      </tr>
    </thead>
    {{#each openGames}}
      <thead class="mobileOnly">
        <tr>
          <th>Datum</th>
          <th>Uhrzeit</th>
          <th>Gruppe / Runde</th>
          <th>Mannschaft 1</th>
          <th>Mannschaft 2</th>
          <th>Auf Ergebnis wetten</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>{{date}}</td>
          <td>{{time}}</td>
          <td>
            {{#if groupName}}
              {{groupName}}
            {{else}}
              <b>{{knockoutRound}}</b>
            {{/if}}
          </td>
          <td>{{team1.name}}</td>
          <td>{{team2.name}}</td>
          <td>
            {{#if currentUser}}
              {{#if datetimeOk}}
                <form id="addBetResult">
                  {{#if canBet}}
                    <div id="resultInputDiv" class="mdl-textfield mdl-js-textfield">
                      <input class="resultInput mdl-textfield__input" id="resultTeam1" type="tel" name="resultTeam1" placeholder="{{team1.shortname}}" required>:<input class="resultInput mdl-textfield__input" id="resultTeam2" type="tel" name="resultTeam2" placeholder="{{team2.shortname}}" required>
                    </div>
                    <button class="mobileBlock mdl-button mdl-js-button mdl-button--raised mdl-button--colored">Wetten</button>
                  {{/if}}
                </form>
                {{#each madeBet}}
                  {{result1}}:{{result2}} |
                {{/each}}
              {{else}}
                {{#if madeBet.count}}
                  {{#each madeBet}}
                    {{result1}}:{{result2}} |
                  {{/each}}
                  <br />
                {{/if}}
                <span>Wetten abgeben nicht mehr m√∂glich!</span>
              {{/if}}
            {{else}}
              <span>Bitte einloggen um Wette abzugeben!</span>
            {{/if}}
          </td>
        </tr>
      </tbody>
      <hr class="mobileOnly" />
    {{/each}}
  </table>
</template>


<template name="finishedGames">
  <table id="" class="standardTable gamesTable highlight bordered responsive-table">
    <thead>
      <tr>
        <th>Datum</th>
        <th>Uhrzeit</th>
        <th>Gruppe / Runde</th>
        <th>Mannschaft 1</th>
        <th>Mannschaft 2</th>
        <th>Ergebnis / Sieger</th>
      </tr>
    </thead>
    {{#each closedGames}}
      <thead class="mobileOnly">
        <tr>
          <th>Datum</th>
          <th>Uhrzeit</th>
          <th>Gruppe / Runde</th>
          <th>Mannschaft 1</th>
          <th>Mannschaft 2</th>
          <th>Auf Ergebnis wetten</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>{{date}}</td>
          <td>{{time}}</td>
          <td>
            {{#if groupName}}
              {{groupName}}
            {{else}}
              <b>{{knockoutRound}}</b>
            {{/if}}
          </td>
          <td>{{team1.name}}</td>
          <td>{{team2.name}}</td>
          <td>
            {{result1}} : {{result2}}
            {{#unless groupName}}
               - <b>{{winnerTeam.name}}</b>
            {{/unless}}
          </td>
        </tr>
      </tbody>
      <hr class="mobileOnly" />
    {{/each}}
  </table>

</template>
